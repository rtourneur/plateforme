---
# handlers file for mysql

# wait some time for startup of the component, before allowing further configuration tasks
- name : wait mysql initialisation
  pause:
    seconds: "60"
  tags: [mysqlComponent]

# apply the SQL script for data initialization
- name: create mysql database
  command: docker exec {{name}}_{{env}} sh -c 'mysql --default-character-set=utf8 --user=root --password={{database.password}} mysql < /var/lib/mysql/{{item}}'
  with_items: "{{database.scripts}}"
  tags: [mysqlComponent]
